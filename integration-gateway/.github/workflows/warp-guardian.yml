name: Warp Guardian

on:
  pull_request:
    branches: [main, develop]

jobs:
  validate-diff:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Diff Size Check
        run: |
          changed_files=$(git diff --name-only origin/main...HEAD | wc -l)
          echo "Changed files: $changed_files"
          if [ "$changed_files" -gt 100 ]; then
            echo "Too many files changed. Possible branch explosion." >&2
            exit 1
          fi
